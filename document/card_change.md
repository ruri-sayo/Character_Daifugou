# カード交換の視覚的実装に関する検討報告

現在の実装では、カード交換はダイアログとボタン操作によるロジカルな処理のみとなっています。
これを視覚的（ビジュアル）に分かりやすく、かつエンターテインメント性を高める方法について検討しました。

## 1. 推奨される実装案：ドラッグ＆ドロップとアニメーション

### UIイメージ
1.  **交換フェーズ突入時:**
    *   画面全体が暗転し、「交換タイム」等の演出が入る。
    *   画面中央に「交換エリア（トレイ）」を表示する。
2.  **カード選択（プレイヤー）:**
    *   手札からカードをドラッグして、中央のトレイに置く。
    *   または、クリックでトレイに移動させるアニメーションを表示。
3.  **交換実行:**
    *   完了ボタンを押すと、トレイのカードが相手（画面上部のCPUアイコン）に向かって飛んでいくアニメーション。
    *   同時に、相手からカードが飛んできて、自分の手札に入るアニメーション。
    *   「シュッ」というSE（効果音）を入れるとより効果的。

### 技術的要件
*   **CSS:** `.card` クラスに `absolute` ポジショニングまたは `transform` を使用して、移動アニメーションを制御する必要がある。現在はFlexbox配置のため、アニメーション時には一時的に配置方法を変更するか、`Flip` (First, Last, Invert, Play) 手法を用いるのが望ましい。
*   **JS:** 交換用カードの選択状態を管理し、交換実行トリガーでアニメーション連鎖を実行するフローが必要。

## 2. 代替案：オーバーレイ選択画面

### UIイメージ
*   画面上に「交換するカードを選んでください」というモーダルウィンドウを大きく表示。
*   自分の手札一覧が大きく表示され、チェックボックスまたはタップで選択。
*   相手からの配布カードは「？」マークのカードとして表示され、タップするとめくれて中身が判明する演出。

### メリット
*   実装が比較的容易（CSSアニメーションの複雑さが低い）。
*   モバイル端末での操作性が高い（ドラッグ＆ドロップよりタップの方が誤操作が少ない）。

## 3. キャラクター性を活かした演出
*   **キャラクターごとのリアクション:**
    *   強いカードを奪われた時の悲しい顔アイコン。
    *   弱いカードを押し付けた時の悪い顔アイコン。
    *   交換時に `AIPlayer.speak()` を呼び出し、「えっ、それくれるの？」や「大事に使ってね」といったセリフを表示する。

## 結論と推奨
まずは **「2. 代替案：オーバーレイ選択画面」** の形式で実装し、カードが相手から配られる際に「裏向きカードが手元に来て、くるっとめくれる」アニメーションを追加するのが、コスト対効果（実装難易度 vs ユーザー体験）のバランスが良いと考えられます。

ドラッグ＆ドロップはPCでは直感的ですが、スマホの狭い画面では手札領域とトレイ領域の確保が難しく、指で隠れてしまう問題があるため、タップ選択式を推奨します。
