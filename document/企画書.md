# キャラクター大富豪（仮） 初期企画書 v0.1

## 1. コンセプト

- **概要:** 既存のオセロゲームの姉妹作。個性豊かなキャラクターたち（全8名から3名選出）と大富豪で対戦する。
- **コア体験:** 「勝ち負け」そのものよりも、キャラクターの**性格（打ち筋・セリフ・交換時の挙動）**を楽しむことに重きを置く。
- **プラットフォーム:** Webブラウザ（スマホ・PC両対応 / HTML, CSS, JS）

## 2. ゲームルール仕様（シンプル・イズ・ベスト）

### 基本ルール

- **人数:** 4人（プレイヤー1名 ＋ CPU 3名）
- **カード:** 52枚（ジョーカーなし）
    - **配布:** 1人13枚ずつ（余りなし）
- **強さ:**
    - 通常: $3 < 4 < ... < K < A < 2$
    - 革命: $2 < A < K < ... < 4 < 3$
- **縛り:** なし（スート縛り等の複雑なルールはv0では除外）
- **パス:** 一度パスしたら、その場のカードが流れるまで出せない（標準ルール）。

### 採用ローカルルール

1. **革命:** カードを4枚同時に出すと発動。強さが反転。
2. **8切り:** 8を含むカード（単体・複数問わず）が出たら、即座に場が流れ、出した人の親番（先手）になる。
3. **都落ち:** *（検討中：シンプルにするなら「なし」でも可ですが、ドラマが生まれるので入れても良いかも。v0では一旦「なし」で設計）*

### ゲーム進行フロー

1. **Home画面**
2. **キャラクター選択**（8人中3人を選択）
3. **ゲーム画面**（プレイ開始）
4. **リザルト画面**（順位確定）
5. **分岐:**
    - Homeに戻る → 終了
    - 続行する → **「カード交換」フェーズへ** → 次のゲームへ

## 3. カード交換（献上）システム

ここが本作の「性格」の見せ所。

- **大富豪 ⇄ 大貧民:** 2枚交換
- **富豪 ⇄ 貧民:** 1枚交換
- **交換ロジック:**
    - **負け側（貧民・大貧民）:** 自動処理。手札の中の**最強カード**を強制的に徴収。
    - **勝ち側（富豪・大富豪）:**
        - **プレイヤー:** ダイアログで渡すカードを選択可能。
        - **CPU:** 性格ロジックで分岐。
            - *例（優花）:* 「一番弱いカード」を素直に渡す。
            - *例（佐紀）:* 「そこそこなカード」を渡して撹乱する、あるいはランダム。

## 4. UI/UX デザイン方針

### 画面構成（オセロ踏襲）

- **上部:** 対面CPU（アイコン＋吹き出し）
- **左右:** 側面CPU（アイコン＋吹き出し）
- **中央:** 場（Field）。出されたカードを表示。
- **下部:** プレイヤーエリア。
    - 自分の手札（タップで選択 → 「出す」ボタンで決定）。
    - 「パス」ボタン。

### 情報表示の工夫（スマホ対応）

- **自分の手札:**
    - 常時ソート（$3, 4, 5...$）。
    - 革命時も**並び順は変えない**（混乱防止のため）。視覚的なガイド（革命中は背景色が変わる等）で対応。
- **相手の手札:**
    - カードを描画せず、**「トランプ裏面のアイコン × 1」＋「残枚数（数字）」**のみを表示。
    - 枚数が減るごとに数字をカウントダウン。

### 演出・テンポ

- **思考ウェイト:**
    - CPUの性格に合わせて `setTimeout` で「間」を作る（優花は長め、佐紀は短め）。
    - プレイヤーの手番中はウェイトなし。
- **プレイヤーあがり後:**
    - 残りのCPU同士の戦いはウェイトをカット（または極短縮）して高速消化。
    - ※ただし、観戦モード的な需要を考慮し、「スキップ」ボタンで高速化させる実装が安全かも。

## 5. 実装への技術的メモ

- **クラス設計案:**
    - `Card`: スート、数字、強さを持つ。
    - `Hand`: カードの集合。ソート機能、出せるカードの判定機能を持つ。
    - `Player`: `Hand`と性格（思考ロジック）を持つ。
    - `GameMaster`: 進行管理、革命フラグ、交換処理を持つ。
- **状態管理（State）:**
    - `SELECT_CHARA`
    - `PLAYING` (MyTurn, EnemyTurn)
    - `REVOLUTION_ANIMATION`
    - `RESULT`
    - `EXCHANGE` (重要)